---
// src/content/pages/Home.astro

import { siteDefaults } from '@/config/siteDefaults';
import ResponsiveImage from '@/components/ResponsiveImage.astro';
import Anchor from '@/components/ui/Anchor.astro';
import FaqList from '@/components/ui/FaqList.astro';
import { Icon } from 'astro-icon/components';
import { buildWhatsAppLink } from '@/utils/whatsapp';
import { getAllReviews, getGlobalAggregate } from "@/utils/reviews";
import Card from '@/components/ui/Card.astro';
import FocusCard from '@/components/ui/FocusCard.astro';

import { servicePagesList } from '@/config/siteServicePages';

import StarRating from '@/components/ui/StarRating.astro';

import ReviewList from "@/components/ReviewList.astro";

import { inr, price } from '@/config/pricing';
import IconMask from '@/components/IconMask.astro';

const all = await getAllReviews();
const agg = await getGlobalAggregate();

const waStartHref = buildWhatsAppLink({
  phone: '',
  text: 'Hi VigaNova!',
  source: 'Hero • Start Apostille',
});

const waQuoteHref = buildWhatsAppLink({
  phone: '',
  text: 'Hi VigaNova! ',
  source: 'Hero • Free Quote',
});

// Contact details (with safe fallbacks)
const email = siteDefaults.contact?.email || `contact@${siteDefaults.domainName}`;
const tel1  = siteDefaults.contact?.phone || '';

const wa1   = (siteDefaults.contact?.whatsapp || '').replace(/[^\d]/g, '');

// HREFs
const telHref1 = tel1 ? `tel:${tel1.replace(/[^\d+]/g, '')}` : '';

const waHref1  = wa1 ? buildWhatsAppLink({
  phone: '',
  text: 'Hi VigaNova!',
  source: 'home-contact',
}) : '';
/* FAQ entries */
/*
const faq = [
    {
      question: "",
      answer: "",
      speakable: true
    },
    
];
*/
const ctas = servicePagesList.map((s: any, i: number) => ({
  href: `#${s.id}`,
  icon: s.icon,
  label: s.title || s.shortLabel,
  variant: i === servicePagesList.length - 1 ? "secondary" : "primary",
  dataId: `cta-${s.id}`,
  ariaLabel: `Learn more about ${s.title}`,
  title: s.description,
}));
const ctas_old = [
  {
    href: '#green-energy-production',
    icon: 'hydrogen-tank',
    label: 'Green Hydrogen Production',
    variant: 'primary',
    dataId: 'cta-green-h2',
    ariaLabel: 'Learn about green hydrogen production',
    title:
      'Clean hydrogen from renewable power, engineered for industrial scale and long-term cost competitiveness.',
  },
  {
    href: '#electrolyzer-systems',
    icon: 'electrochemistry',
    label: 'Electrolyzer Systems',
    variant: 'primary',
    dataId: 'cta-electrolyzer',
    ariaLabel: 'Explore our electrolyzer systems',
    title:
      'High-efficiency alkaline and PEM electrolyzer stacks, from lab validation to deployment.',
  },
  {
    href: '#green-ammonia-urea',
    icon: 'ammonia',
    label: 'Green Ammonia & Urea',
    variant: 'primary',
    dataId: 'cta-green-ammonia',
    ariaLabel: 'See our green ammonia and urea solutions',
    title:
      'Decarbonized ammonia for fertilizer and energy storage using nitrogen + green hydrogen.',
  },
  {
    href: '#rd-consulting',
    icon: 'chemical-beakers',
    label: 'R&D & Consulting',
    variant: 'secondary',
    dataId: 'cta-rd',
    ariaLabel: 'Get R&D and consulting support',
    title:
      'Custom materials, process optimization, and pilot-scale strategy for hydrogen and ammonia.',
  },
];
// Each FocusCard needs id, icon, title, description, href, img, reverse
const focusAreas = servicePagesList.map((s: any) => ({
  id: s.id,
  iconName: s.icon,
  title: s.title,
  description: s.description,
  href: s.href,
  img: s.imageSquare, // square images for home cards
  reverse: s.reverse,
}));
const focusAreas_old = [
  {
    id: 'green-energy-production',
    iconName: 'hydrogen-tank',
    title: 'Green Hydrogen Production',
    description:
      'Clean hydrogen from renewable power, engineered for industrial scale and long-term cost competitiveness.',
    href: '/services/green-hydrogen/',
    img: {
      src: 'hydrogen-production.jpg',
      alt: 'Green hydrogen production plant',
      title: 'Hydrogen Production',
    },
    reverse: true,
  },
  {
    id: 'electrolyzer-systems',
    iconName: 'electrochemistry',
    title: 'Electrolyzer Systems',
    description:
      'High-efficiency alkaline and PEM electrolyzer stacks, from lab validation to deployment.',
    href: '/services/electrolyzer-systems/',
    img: {
      src: 'electrolyzer-tech.jpg',
      alt: 'Electrolyzer stack and system integration',
      title: 'Electrolyzer Systems',
    },
    reverse: false,
  },
  {
    id: 'green-ammonia-urea',
    iconName: 'ammonia',
    title: 'Green Ammonia Production',
    description:
      'Decarbonized ammonia for fertilizer and energy storage using nitrogen + green hydrogen — no fossil feedstock.',
    href: '/services/green-ammonia/',
    img: {
      src: 'green-ammonia.jpg',
      alt: 'Green ammonia synthesis loop',
      title: 'Green Ammonia',
    },
    reverse: true,
  },
  {
    id: 'rd-consulting',
    iconName: 'chemical-beakers',
    title: 'Research & Development Consulting',
    description:
      'Custom materials, process optimization, and scale-up strategy from lab prototype to pilot plant.',
    href: '/services/research-development/',
    img: {
      src: 'research-lab.jpg',
      alt: 'Advanced electrochemistry and materials R&D lab',
      title: 'Research & Development Consulting',
    },
    reverse: false,
  },
];
const whyChooseUs = [
  {
    title: "Sustainability-Driven Innovation",
    description: "Pioneering solutions that align technology with environmental responsibility",
    icon: "leaf-2",
  },
  {
    title: "End-to-End Expertise",
    description: "From R&D to deployment, we offer turnkey clean energy systems",
    icon: "circle-tick",
  },
  {
    title: "Global Vision",
    description: "Bridging innovation and implementation for worldwide green energy transformation",
    icon: "globe",
  },
];
---
<article id="post-layout" class="post-layout col-primary-dark">
  { /*-- Hero Section --*/ }
  <header id="post-header" class="post-header dots-background max-w-100p h-100p w-100p mx-auto ta-center relative overflow-hidden pb-2">
    <ResponsiveImage
      src="hero-image.jpg"
      alt="Viga Nova Green Energy Solutions - Electrolyzer for Hydrogen and Ammonia Production"
      title="Viga Nova Green Energy Solutions - Electrolyzer for Hydrogen and Ammonia Production"
      width="380" breakpoints={{ mobile: 380, desktop: 640 }}
      addSchema={true}
      className="hero-image absolute inset-0 opacity-90 object-p-bottom object-cover"
      imageClassName='br-r-unset'
      loading="eager"
      variant="desktop" 
      id="hero-image"
    />    
    <div id="hero-section" class="flex flex-col max-w-featured mx-auto w-100p py-2 px-1 ai-f-start jc-center gap relative ta-start my-2">
      <h1 class="post-title regular text-base">
        Viga Nova Green Energy Solutions
      </h1>
      <h2 class="text-6xl my-0">
        Advancing Clean Green Energy, Shaping Tomorrow
      </h2>
      <p>
      Empowering the world's transition to a hydrogen-powered, carbon-neutral future through innovation in green energy and advanced electrolyzer technologies
      </p>
        
      <div class="cta-container my-1 flex flex-row wrap gap ai-f-start">
        {ctas.map((item) => (
          <Anchor
            href={item.href}
            type="button"
            variant={(item.variant as 'primary' | 'secondary') ?? 'primary'}
            ariaLabel={item.ariaLabel}
            title={item.title}
            dataId={item.dataId}
            className={`cta-chip flex big-flex-col ai-center big-ai-f-start gap-05 big-gap-0 br-r`}
            dataAction="link_click"
            dataLabel={item.label}
          >
            <span class="cta-icon-wrap flex ai-center jc-center br-r">
              <Icon
                slot="icon-left"
                name={item.icon}
                id={`${item.dataId}-icon`}
                class="block fill-base-100 w-5-0 h-5-0"
                aria-hidden="true"
                focusable="false"
              />
            </span>
            <span class="cta-text block">{item.label}</span>
          </Anchor>
        ))}
      </div>      
    </div>      
  </header>
  <section id="about-us-section" class="max-w-full w-100p mx-auto bg-primary-lighter-x" aria-labelledby="about-us-section">
    <div class="max-w-featured w-100p mx-auto p-2 ji-center">
      <h2 id="about-us-heading" class="ta-center">
        About Viga Nova Green Energy
      </h2>
      <p class="ta-center my-1">
        We aim to accelerate the transition to a sustainable energy future by developing cost-effective, scalable, and high-efficiency hydrogen and ammonia systems that help industries decarbonize and thrive responsibly.
      </p>
      <Anchor className="w-fit" variant="primary" href="/about-us/">Learn More About Us</Anchor>
    </div>
  </section>

  <section id="focus-area-section" class="max-w-full w-100p mx-auto" aria-labelledby="focus-area-section">
    <div class="focus-areas-grid">
      <h2 id="focus-area-heading" class="max-w-featured w-100p mx-auto p-1 ta-center">
        Our Focus Areas
      </h2>
      <p class="max-w-featured w-100p mx-auto p-1 ta-center">
        We aim to accelerate the transition to a sustainable energy future by developing cost-effective, scalable, and high-efficiency hydrogen and ammonia systems that help industries decarbonize and thrive responsibly.
      </p>
      <div class="bubble-background" aria-hidden="true">   
      </div>

      {focusAreas.map(area => (
        <FocusCard
          id={area.id}
          iconName={area.iconName}
          title={area.title}
          description={area.description}
          href={area.href}
          img={area.img}
          reverse={area.reverse}
        />
      ))}
    </div>

  </section>
  
    { /*-- Link added --*/ }
<section id="why-choose-us-section" class="bg-gradient-primary w-100p mx-auto my-1 p-1 col-base-00" aria-labelledby="why-choose-us-section">
  <h2 id="why-choose-us-h2" class="ta-center max-w-featured w-100p mx-auto my-05">
    Why Choose Us
  </h2>

  <p class="max-w-featured w-100p mx-auto ta-center opacity-90 my-1">
    Leading the way in <strong>clean energy innovation</strong> with expertise, sustainability, and a global vision.
  </p>

  <!-- Feature cards -->
  <ul class="no-bullets flex flex-row wrap gap-05 my-2 mx-auto mi-s-auto max-w-site w-100p jc-center" role="list">
    {whyChooseUs.map(area => (
      <li class="max-w-sidebar w-100p p-1 flex flex-col gap-05 ta-center ai-center">
        <div class="flex w-fit ai-center bg-primary-lighter jc-center br-r">
          <IconMask
            name={area.icon} size='2xl'
            class="col-primary fill-primary w-3-0 h-3-0"
            aria-hidden="true"            
          />
        </div>
        <h3 class="my-0 text-lg">{area.title}</h3>
        <p class="">{area.description}</p>
      </li>
    ))}    
  </ul>  
</section>

<div id="vision-mission-section" class="w-100p mx-auto my-1 p-1" aria-labelledby="vision-mission-section">
  <div class="flex flex-row wrap gap-05 my-2 mx-auto max-w-featured w-100p ac-f-start ai-f-start jc-f-start" role="list">   
    <div class="w-100p p-1 flex flex-col flex-1 gap-05 ai-f-start br-r h-webkit box-shadow-light hover-box-shadow-strong transition-shadow">
      <div class="flex flex-row gap-05 w-fit ai-center jc-center br-r">
        <div class="bg-primary-lighter-x br-r w-3-0 h-3-0">
          <IconMask
            name="power-trending" size='xl'
            class="col-primary fill-primary"
            aria-hidden="true"            
          />
        </div>
        <h3 class="my-0 text-xl">Our Mission</h3>
      </div>
      
      <p class="text-small my-1 col-base-80">To revolutionize energy systems by making green hydrogen and clean energy technologies accessible, efficient, and impactful for industries worldwide.</p>
    </div>
    <div class="w-100p p-1 flex flex-col flex-1 gap-05 ai-f-start br-r h-webkit box-shadow-light hover-box-shadow-strong transition-shadow">
      <div class="flex flex-row gap-05 w-fit ai-center jc-center br-r">
        <div class="bg-primary-lighter-x br-r w-3-0 h-3-0">
          <IconMask
            name="idea" size='xl'
            class="col-primary fill-primary"
            aria-hidden="true"            
          />
        </div>
        <h3 class="my-0 text-lg">Our Vision</h3>
      </div>
      
      <p class="text-small my-1 col-base-80">A carbon-neutral world powered by sustainable hydrogen and renewable innovation.</p>
    </div>  
  </div> 
  <Anchor className="max-w-sidebar w-100p mx-auto my-1 p-1" variant="primary" href="/about-us/#ceo-message">CEO Message</Anchor> 
</div>

<div id="call-to-action-section" class="w-100p mx-auto bg-primary-lighter-x" aria-labelledby="call-to-action-section">
  <div class="flex flex-col gap-05 mx-auto max-w-featured w-100p p-1 ai-center ta-center" role="list">
    <h2>Ready to Build a Sustainable Future?</h2> 
    <p>Whether you're an industry partner, researcher, or policymaker — join us in building a cleaner, hydrogen-powered tomorrow.</p>
    <div class="flex flex-row wrap gap-05 my-1">  
      <Anchor className="w-fit" variant="primary" href="/contact-us/">Contact Us</Anchor>
      <Anchor className="w-fit" variant="secondary" href="/services/">Explore Our Services</Anchor>  
    </div>
  </div> 
</div>

   

    {/* Array.isArray(faq) && faq.length > 0 && (
        <FaqList
          items={faq}
          id="faq"
          class="post-faq bg-base-00 w-100p mx-auto my-2 p-2"
          headingClass="max-w-featured mx-auto ta-center"   
          listClass='max-w-featured mx-auto'
          questionClass='text-base bold'
          answerClass='bg-primary-lighter-x'
          heading="Frequently Asked Questions"
          headingTag="h2"
          openAll={false}
          addSchema={true}
          addSpeakableSchema={true}
          htmlAnswers={false}
        />
    ) */}   
</article>
